<!DOCTYPE html>
<html lang='en'>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.6">

    <title>MARTA.MKV</title>

    <link rel="icon" href="assets/favicon.ico">
    <link rel="stylesheet" type="text/css" href="style.css">

    <style>
        body {
            background-size: cover;
            background-repeat: no-repeat;
        }

        span.star {
            cursor: pointer;
            font-size: 2rem;
            user-select: none;
        }

        /* Estilos movidos desde inline */
        .logo-img {
            height: 1em;
            vertical-align: baseline;
        }

        .wavy-underline {
            text-decoration-style: wavy;
        }

        #btn {
            text-decoration: underline;
            cursor: pointer;
        }

        #desktop {
            text-decoration: none;
        }
    </style>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F9YHR26YNQ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-F9YHR26YNQ');
    </script>

    </head>

<body onload="startTime()">
    <div id="content">
        <div class="container">
            <div class="text">
                <a href="#" class="styleone" id="egg">*</a>
                <div id="info"></div>
                <p style="margin-top: 2em;">
                    <img src="assets/AE-logo-old.png" alt="AE Logo" class="logo-img"> My name is Marta, and I'm a Postproduction Artist at
                    <a href="https://www.canadacanada.com/" target="_blank">CANADA</a>, a production company based in
                    <a href="https://maps.app.goo.gl/8Jax9VNqDX4G4gpo7" target="_blank">Barcelona</a>;
                </p>
                <p>
                    𓇢𓇢 𓇢𓇢 𓇢𓇢𓇢𓇢 𓇢 feel free to <u class="wavy-underline">explore.</u>
                </p>

                <p style="margin-top: 3em;">
                    <a href="works">Work</a>
                </p>

                <div id="btn">Contact --></div>

                <p style="margin-top: 4em;">
                    <a href="woym.html" id="desktop">only for desktop</a>
                </p>

                <div style="margin-top: 6em;">
                    <a href="#" class="styleone" id="showBg">𓆏</a>
                </div>

                <div id="star-wrapper" style="margin-top: 10em;">
                    <a href="#" class="styleone" id="star">*</a>
                    <span id="counter" style="display:none;">0</span>
                </div>

                <div style="margin-top: 10em;">
                    <a href="#" class="styleone" id="tabloid">*</a>
                </div>

            </div>
            <div id="clock"></div>
        </div>
    </div>


    <script>
        // Función del reloj (se cambiaron 'var' por 'let/const' cuando fue apropiado)
        function checkTime(i) {
            if (i < 10) {i = "0" + i;}
            return i;
        }

        function startTime() {
            let today = new Date();
            let h = today.getHours();
            let m = today.getMinutes();
            let s = today.getSeconds();
            m = checkTime(m);
            s = checkTime(s);
            document.getElementById('clock').innerHTML = h + ":" + m + ":" + s;
            // Se usó 'const' para el timeout
            const t = setTimeout(startTime, 500);
        }

        // Script del botón Contacto
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.getElementById('btn');
            const originalText = btn.textContent;

            btn.addEventListener('click', function handleClick() {
                // Alternar texto
                if (btn.textContent === originalText) {
                    btn.textContent = 'Contact --> marta.castillo(at)canadacanada(dot)com // casfemarta(at)gmail(dot)com';
                } else {
                    btn.textContent = originalText;
                }

                gtag('event', 'click', {
                    'event_category': 'interacción',
                    'event_label': 'Botón Contact'
                });
            });
        });

        // Script del Tabloid
        document.getElementById('tabloid').addEventListener('click', function(e) {
            e.preventDefault();
            document.body.style.backgroundImage = "url('assets/tabloid02.png')";
            document.body.style.backgroundSize = "cover";
            document.body.style.backgroundPosition = "center";
        });

        // Script del Huevo de Pascua (Estrella)
        let count = 0;
        const counter = document.getElementById("counter");
        let recordTarget = getRandomTarget();

        const messages = [
            "what if",
            "we all",
            "quit our jobs and",
            "just",
            "hang out"
        ];

        let currentMessageIndex = 0;

        function getRandomTarget() {
            return Math.floor(Math.random() * 10) + 5;
        }

        document.getElementById("star").addEventListener("click", function(e) {
            e.preventDefault();
            count++;
            counter.textContent = count;
            counter.style.display = "inline";

            if (count === recordTarget && currentMessageIndex < messages.length) {
                alert(messages[currentMessageIndex]);
                currentMessageIndex++;
                recordTarget = count + getRandomTarget();
            }
        });

        // Script del Huevo de Pascua (Rana)
        let frogClickCount = 0;
        const showBg = document.getElementById('showBg');
        const fotos = [
            'assets/foto01.png',
            'assets/foto02.png',
            'assets/foto03.png',
            'assets/foto04.png'
        ];

        const textos = [
            "Born: Granada\n \n(data loaded 13%)",
            "Born: Granada\nRaised: Valencia\n \n(data loaded 41%)",
            "Born: Granada\nRaised: Valencia\nBased: Barcelona\n \n(data loaded 75%)",
            "Born: Granada\nRaised: Valencia\nBased: Barcelona\n \nI enjoy geeky stuff, quiet environments, people (in small doses), animals (in all doses),\nbooks, <2h movies, >2h playlists,\nnature, and watching the world like it’s a documentary.\nI studied oceanography, now I tweak pixels as a VFX artist.\nEternally learning.\n \n(data loaded 100%)"
        ];

        // about text
        const textoDiv = document.createElement('div');
        textoDiv.style.position = 'fixed';
        textoDiv.style.top = '80%';
        textoDiv.style.left = '50%';
        textoDiv.style.transform = 'translate(-50%, -50%)';
        textoDiv.style.color = 'black';
        textoDiv.style.fontFamily = '"Times New Roman", Times, serif';
        textoDiv.style.fontSize = '11pt';
        textoDiv.style.maxWidth = '80%';
        textoDiv.style.wordWrap = 'break-word';
        textoDiv.style.textAlign = 'center';
        textoDiv.style.whiteSpace = 'pre-line';
        document.body.appendChild(textoDiv);

        showBg.addEventListener('click', function(e) {
            e.preventDefault();

            // Change bg
            document.body.style.backgroundImage = `url('${fotos[frogClickCount]}')`;
            document.body.style.backgroundSize = 'cover';
            document.body.style.backgroundPosition = 'center';

            // random position frog
            const randomBottom = Math.floor(Math.random() * (window.innerHeight - showBg.offsetHeight));
            const randomLeft = Math.floor(Math.random() * (window.innerWidth - showBg.offsetWidth));
            showBg.style.position = "absolute";
            showBg.style.bottom = `${randomBottom}px`;
            showBg.style.left = `${randomLeft}px`;

            textoDiv.textContent = textos[frogClickCount];


            frogClickCount = (frogClickCount + 1) % fotos.length;
        });

        // Script del Huevo de Pascua (IP/Info)
        async function getIP() {
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                return data.ip;
            } catch {
                return 'Unavailable';
            }
        }

        document.getElementById('egg').addEventListener('click', async () => {
            const infoBox = document.getElementById('info');

            if (infoBox.style.display === "block") {
                infoBox.style.display = "none";
                return;
            }

            const ip = await getIP();
            const ua = navigator.userAgent;
            const lang = navigator.language;
            const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;

            infoBox.textContent =
                `IP Address: ${ip}\n` +
                `Browser / OS: ${ua}\n` +
                `Language: ${lang}\n` +
                `Time Zone: ${tz}`;

            infoBox.style.display = "block";
        });
    </script>


</body>
</html>
